<!DOCTYPE html>
<html>

<head>
  <title>Exam Grade Calculator - JS Code Along 3</title>
  <link href="styles/bootstrap.min.css" rel="stylesheet" />
  <link href="styles/styles.css" rel='stylesheet' />
</head>

<body>
  <div class="alert alert-primary" role="alert">
    <div class="container">
      This was the final product of JS Code Along 3. 
      <a href="/post/30th-march-2019">Post class briefing</a>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="col-sm">
        <h1 class='display-1'>Exam Grade Calculator</h1>
        <p class="lead">
          <blockquote class="blockquote">
            <p class="mb-0">Enter the exam results, and I will tell you your grade.</p>
          </blockquote>
        </p>
      </div>
    </div>
    <hr />

    <div class="row mt-3">
      <div class="col-12">
        <div class="input-group input-group-lg">
          <input 
            max='100'
            min='0'
            id='score' 
            type="number" 
            placeholder="Score out of 100" 
            class="form-control"
          />
          <div class="input-group-append">
            <button class="btn btn-outline-secondary" type="button" onclick='calculateGrade()'>Calculate</button>
          </div>        
        </div>
      </div>
    </div>

    <div class="row mt-3">
      <div class="col">
        <table class="table">
          <thead class='thead-dark'>
            <tr>
              <th scope="col">Score Range</th>
              <th scope="col">Grade</th>
            </tr>
          </thead>
          <tbody>
            <tr id="A1">
              <th scope="row">75 and above</th>
              <td>A1</td>
            </tr>
            <tr id="A2">
              <th scope="row">70 to 74</th>
              <td>A2</td>
            </tr>
            <tr id="B3">
              <th scope="row">65 to 69</th>
              <td>B3</td>
            </tr>
            <tr id="B4">
              <th scope="row">60 to 64</th>
              <td>B4</td>
            </tr>
            <tr id="C5">
              <th scope="row">55 to 59</th>
              <td>C5</td>
            </tr>
            <tr id="C6">
              <th scope="row">50 to 54</th>
              <td>C6</td>
            </tr>
            <tr id="D7">
              <th scope="row">45 to 49</th>
              <td>D7</td>
            </tr>
            <tr id="E8">
              <th scope="row">40 to 44</th>
              <td>E8</td>
            </tr>
            <tr id="F9">
              <th scope="row">0 to 39</th>
              <td>F9</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>

<script>
  let activeRowId = null;

  function getScore(){
    const scoreElement = document.getElementById('score');
    const score = parseInt(scoreElement.value);

    if(score > 100){
      alert('Please enter a value lower than 101');
    } else {
      return score;
    }
  }

  function calculateGrade(){
    const score = getScore();

    if(score >= 75){
      setGradeRowToActive('A1');
    } else if(score < 75 && score > 69){
      setGradeRowToActive('A2');
    } else if(score < 70 && score > 64){
      setGradeRowToActive('B3');
    } else if(score < 65 && score > 59){
      setGradeRowToActive('B4');
    } else if(score < 60 && score > 54){
      setGradeRowToActive('C5');
    } else if(score < 55 && score > 49){
      setGradeRowToActive('C6');
    } else if(score < 50 && score > 44){
      setGradeRowToActive('D7');
    } else if(score < 45 && score > 39){
      setGradeRowToActive('E8');
    } else if(score < 40){
      setGradeRowToActive('F9');
    }
  }

  function setGradeRowToActive(id){
    clearActiveRow();

    activeRowId = id;
    const rowElement = getRowWithId(id);
    rowElement.className = 'table-info';
  }

  function clearActiveRow(){
    if(activeRowId){
      const rowElement = getRowWithId(activeRowId);
      rowElement.className = "";
      activeRowId = null;
    }   
  }

  function getRowWithId(id){
    const element = document.getElementById(id);

    return element;
  }
</script>

</html>